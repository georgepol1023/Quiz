<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Complete!</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Segoe UI', Tahoma, sans-serif;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    transition: background 0.3s ease;
  }

  body.light {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  body.dark {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  }

  .container {
    background: white;
    padding: 50px;
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    max-width: 600px;
    width: 100%;
    text-align: center;
    transition: background 0.3s ease, color 0.3s ease;
  }

  body.dark .container {
    background: #0f3460;
    color: #e8e8e8;
  }

  /* Mobile responsive styles */
  @media (max-width: 768px) {
    body {
      padding: 15px;
      align-items: flex-start;
      padding-top: 30px;
    }

    .container {
      padding: 30px 25px;
      border-radius: 15px;
    }

    .celebration {
      font-size: 50px !important;
      margin-bottom: 15px !important;
    }

    h1 {
      font-size: 26px !important;
      margin-bottom: 12px !important;
    }

    .name {
      font-size: 20px !important;
      margin-bottom: 30px !important;
    }

    .score-container {
      padding: 25px 20px !important;
      margin-bottom: 25px !important;
    }

    .score {
      font-size: 52px !important;
    }

    .score-label {
      font-size: 14px !important;
    }

    .points-container {
      padding: 20px !important;
      margin-bottom: 25px !important;
    }

    .points-score {
      font-size: 40px !important;
    }

    .fun-fact {
      padding: 15px !important;
      margin-bottom: 25px !important;
      font-size: 14px !important;
    }

    .buttons {
      flex-direction: column !important;
      gap: 12px !important;
    }

    .button {
      min-width: 100% !important;
      padding: 14px 20px !important;
      font-size: 15px !important;
    }

    .feedback {
      font-size: 16px !important;
    }
  }

  @media (max-width: 480px) {
    .container {
      padding: 25px 20px;
    }

    h1 {
      font-size: 24px !important;
    }

    .score {
      font-size: 48px !important;
    }

    .points-score {
      font-size: 36px !important;
    }
  }

  .celebration {
    font-size: 60px;
    margin-bottom: 20px;
    animation: bounce 1s ease infinite;
  }

  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
  }

  h1 {
    font-size: 32px;
    color: #333;
    margin-bottom: 15px;
  }

  body.dark h1 {
    color: #e8e8e8;
  }

  .name {
    font-size: 24px;
    color: #667eea;
    margin-bottom: 40px;
    font-weight: 600;
  }

  body.dark .name {
    color: #e94560;
  }

  .score-container {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 30px;
    border-radius: 15px;
    margin-bottom: 30px;
    color: white;
  }

  body.dark .score-container {
    background: linear-gradient(135deg, #e94560 0%, #0f3460 100%);
  }

  .score-label {
    font-size: 16px;
    margin-bottom: 10px;
    opacity: 0.9;
  }

  .score {
    font-size: 64px;
    font-weight: bold;
    margin-bottom: 10px;
  }

  .points-container {
    background: #f8f9fa;
    padding: 25px;
    border-radius: 15px;
    margin-bottom: 30px;
  }

  body.dark .points-container {
    background: #16213e;
  }

  .points-label {
    font-size: 18px;
    color: #666;
    margin-bottom: 10px;
  }

  body.dark .points-label {
    color: #aaa;
  }

  .points-score {
    font-size: 48px;
    font-weight: bold;
    color: #764ba2;
    margin-bottom: 5px;
  }

  body.dark .points-score {
    color: #f39c12;
  }

  .points-max {
    font-size: 14px;
    color: #999;
  }

  body.dark .points-max {
    color: #888;
  }

  .fun-fact {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 30px;
    font-style: italic;
    color: #555;
    line-height: 1.6;
  }

  body.dark .fun-fact {
    background: #16213e;
    color: #ccc;
  }

  .buttons {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
  }

  .button {
    flex: 1;
    min-width: 150px;
    padding: 15px 30px;
    border-radius: 10px;
    text-decoration: none;
    font-weight: bold;
    font-size: 16px;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    display: inline-block;
  }

  .button-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
  }

  body.dark .button-primary {
    background: linear-gradient(135deg, #e94560 0%, #0f3460 100%);
  }

  .button-secondary {
    background: white;
    color: #667eea;
    border: 2px solid #667eea;
  }

  body.dark .button-secondary {
    background: #16213e;
    color: #e94560;
    border-color: #e94560;
  }

  .button:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
  }

  .button:active {
    transform: translateY(0);
  }

  .feedback {
    margin: 20px 0;
    font-size: 18px;
    font-weight: 600;
  }

  .feedback.excellent { color: #52c41a; }
  .feedback.good { color: #1890ff; }
  .feedback.ok { color: #faad14; }
  .feedback.poor { color: #f5222d; }
</style>
</head>
<body class="{{ theme }}">
<div class="container">
  <div class="celebration">üéâ</div>
  <h1>Quiz Complete!</h1>
  <p class="name">{{ name }}</p>

  {% if was_terminated %}
  <div style="background: #ff4757; color: white; padding: 20px; border-radius: 10px; margin-bottom: 25px; font-weight: bold;">
    ‚ö†Ô∏è QUIZ TERMINATED<br>
    <span style="font-size: 14px; font-weight: normal;">Your quiz was ended early due to 3 anti-cheat violations.</span>
  </div>
  {% endif %}

  <div class="score-container">
    <div class="score-label">Accuracy</div>
    <div class="score">{{ score }}%</div>
    <div class="score-label">{{ (score / 100 * total_questions) | round | int }} out of {{ total_questions }} correct</div>
  </div>

  <div class="points-container">
    <div class="points-label">Total Score</div>
    <div class="points-score">{{ total_points }}</div>
    <div class="points-max">out of {{ max_possible_points }} possible points</div>
  </div>

  {% if score >= 90 %}
  <p class="feedback excellent">Excellent work! You really know your Bible! üåü</p>
  {% elif score >= 70 %}
  <p class="feedback good">Great job! Keep studying! üìñ</p>
  {% elif score >= 50 %}
  <p class="feedback ok">Good effort! There's room to grow! üí™</p>
  {% else %}
  <p class="feedback poor">Keep practicing! You'll improve! üôè</p>
  {% endif %}

  <div class="fun-fact">
    üí° {{ fun_fact }}
  </div>

  <div class="buttons">
    <a href="/" class="button button-primary">Play Again</a>
    <a href="/leaderboard" class="button button-secondary">View Leaderboard</a>
  </div>
</div>
</body>
</html>